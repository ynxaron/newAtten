<!doctype html>
<html lang="en" ng-app="attendanceApp">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Student Attendance Dashboard</title>

        <!-- Bootstrap 5 CDN -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />

        <!-- Font Awesome for icons -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>

        <!-- Chart.js CDN -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="scripts/sidebar_button.js"></script>
        <script src="scripts/header_script.js"></script>
        <script src="scripts/main_script.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
        <link rel="stylesheet" href="styles/main_style.css" />
    </head>

    <body>
        <div class="container-fluid p-0 m-0">
            <div class="row">
                <!-- Sidebar -->
                <div
                    class="sidebar d-flex flex-column position-fixed bg-white p-3"
                    id="sidebar"
                    style="
                        top: 0;
                        left: 0;
                        height: 100vh;
                        width: 260px;
                        z-index: 1030;
                    "
                >
                    <div class="mb-5 text-center">
                        <img
                            src="assets/djubo-cropped.png"
                            alt="DJUBO Logo"
                            style="max-width: 100%; height: 85px"
                        />
                        <p class="text h4 ms-2 mt-3 fw-bold">
                            DJUBO Hospitality
                        </p>
                    </div>

                    <nav class="nav flex-column">
                        <a
                            id="checkin-btn"
                            class="nav-link px-3 py-2 rounded text-white mb-2"
                            style="background-color: #825995"
                            href="#"
                        >
                            <i class="fas fa-clipboard-check me-2"></i>
                            <strong>CHECK IN</strong>
                        </a>

                        <a
                            id="checkout-btn"
                            class="nav-link px-3 py-2 rounded text-white mb-5"
                            style="background-color: #825995"
                            href="#"
                        >
                            <i class="fas fa-lock me-2"></i>
                            <strong>CHECK OUT</strong>
                        </a>

                        <a
                            id="break-btn"
                            class="nav-link px-3 py-2 rounded text-white mb-5"
                            style="background-color: #825995"
                            href="#"
                        >
                            <i class="fas fa-mug-hot me-2"></i>
                            <strong>BREAK</strong>
                        </a>

                        <hr style="height: 10px" />

                        <a
                            class="nav-link"
                            id="refresh-btn"
                            href="#"
                            target="_blank"
                        >
                            <i class="fas fa-rotate-right me-2"></i>Refresh
                        </a>

                        <a
                            class="nav-link"
                            href="localhost:4500/settings.html"
                            ,
                            target="_blank"
                        >
                            <i class="fas fa-cog me-2"></i>Settings
                        </a>

                        <a class="nav-link" href="localhost:4500/login.html">
                            <i class="fas fa-sign-out-alt me-2"></i>Log Out
                        </a>
                    </nav>

                    <div class="mt-auto text-center">
                        <img
                            src="assets/profile_cropped.png"
                            class="rounded-circle mb-2"
                            style="width: 60px; height: 60px"
                        />
                        <p class="mb-0 fw-bold" id="username-display">
                            Loading...
                        </p>
                        <small>Developer</small>
                    </div>
                </div>
                <!-- Sidebar-->
                <!-- Main Dashboard -->
                <div class="col p-4" style="margin-left: 260px">
                    <!-- Header -->
                    <div
                        class="d-flex justify-content-between align-items-center mb-4"
                        ng-controller="header"
                    >
                        <!--BEGIN:TIME & USERNAME-->
                        <div class="d-flex">
                            <span
                                style="
                                    font-size: 2.25rem;
                                    font-weight: 900;
                                    color: darkgray;
                                    margin-left: 40px;
                                    margin-right: 30px;
                                "
                                >{{currentTime}}</span
                            >

                            <div class="vr me-4" style="width: 3px"></div>

                            <h1 class="fw-bold" style="margin-top: 3px">
                                <span>Hello, {{userName}}</span>
                            </h1>
                        </div>
                        <!--END:TIME & USERNAME-->

                        <!--BEGIN: Settings Page Overview-->

                        <div
                            class="position-fixed bg-white rounded-4 shadow-lg p-4 m-4"
                            id="setting-overview"
                            style="
                                z-index: 2000;
                                width: 320px;
                                top: 54px;
                                right: 5px;
                                opacity: 0;
                            "
                        >
                            <!-- Top section: Image + Details -->
                            <div class="d-flex align-items-center mb-4">
                                <!-- Left: Profile Picture -->
                                <img
                                    src="assets/profile_cropped.png"
                                    alt="Profile"
                                    style="
                                        width: 70px;
                                        height: 70px;
                                        object-fit: cover;
                                        border-radius: 10px;
                                    "
                                />

                                <!-- Right: Name & Job -->
                                <div class="ms-3">
                                    <p
                                        class="mb-1 fw-bold"
                                        style="font-size: 1.1rem"
                                    >
                                        {{userName}}
                                    </p>
                                    <p class="mb-0 text-muted">{{userJob}}</p>
                                </div>
                            </div>

                            <!-- Bottom Buttons -->
                            <div class="d-flex justify-content-between">
                                <!-- Refresh -->

                                <button
                                    class="btn border border-white"
                                    ng-click="thisSelect('refresh-btn')"
                                    ng-class="{'clicked': thisClick=='refresh-btn'}"
                                >
                                    <i class="fas fa-rotate-right"></i>
                                </button>

                                <!-- Report Error -->
                                <button
                                    class="btn border border-white"
                                    ng-click="thisSelect('report-bug-btn')"
                                    ng-class="{'clicked': thisClick=='report-bug-btn'}"
                                >
                                    <i class="fas fa-bug"></i>
                                </button>

                                <!-- Logout -->
                                <button
                                    class="btn border border-white"
                                    ng-click="thisSelect('logout-btn')"
                                    ng-class="{'clicked': thisClick=='logout-btn'}"
                                >
                                    <i class="fas fa-sign-out-alt"></i>
                                </button>
                            </div>
                        </div>

                        <!--END: Settings Page Overview-->

                        <!--BEGIN: ICONS & BUTTONS-->
                        <div class="d-flex align-items-center gap-3">
                            <button
                                class="btn border-white"
                                ng-click="refresh(); thisSelect('refresh-btn')"
                                ng-class="{'clicked': thisClick=='refresh-btn'}"
                            >
                                <i
                                    class="fas fa-rotate-right fs-5 text-secondary"
                                    style="cursor: pointer"
                                ></i>
                            </button>

                            <button
                                class="btn border border-white"
                                ng-click="openSettings(); thisSelect('setting-btn')"
                                ng-class="{'clicked': thisClick == 'setting-btn'}"
                            >
                                <i
                                    class="fas fa-cog fs-5 text-secondary"
                                    style="cursor: pointer"
                                ></i>
                            </button>

                            <button
                                class="btn btn-white"
                                ng-click="toggleProfile()"
                            >
                                <img
                                    src="assets/profile_cropped.png"
                                    alt="Profile"
                                    class="rounded-circle"
                                    style="
                                        width: 40px;
                                        height: 40px;
                                        object-fit: cover;
                                    "
                                />
                            </button>
                        </div>
                    </div>
                    <!--END: ICONS & BUTTONS-->

                    <!-- Stats Cards -->
                    <!--BEGIN: Profile Overview-->
                    <div class="row border shadow-lg p-4 m-1 mb-4 rounded">
                        <div class="rounded-circle mb-2">
                            <img
                                src="assets/profile_cropped.png"
                                style="width: 60px; styleheight: 60px"
                            />
                        </div>
                    </div>
                    <!--END: Profile Overview-->
                    <!--BEGIN: Different Graphs-->
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>42h</h4>
                                <small>Total Leaves Taken</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>83h</h4>
                                <small>Total Leaves Left</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>100h</h4>
                                <small>Paid Overtime</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-box">
                                <h4>25d</h4>
                                <small>Total Absents</small>
                            </div>
                        </div>
                    </div>

                    <div class="mt-5 mb-4">
                        <h4><strong>Heat Map</strong></h4>
                        <div class="calendar" id="work-hours-calendar"></div>
                    </div>

                    <!-- Charts -->

                    <div class="chart-box">
                        <h4><strong>Hours by Week</strong></h4>
                        <canvas id="barChart"></canvas>
                    </div>

                    <div class="chart-box mb-4">
                        <h4><strong>Hours By Month</strong></h4>
                        <canvas id="lineChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
