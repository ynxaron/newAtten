<!doctype html>
<html ng-app="buttons">
    <head>
        <title>Settings PopUp</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        />

        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    </head>
    <body>
        <!-- SETTINGS POPUP -->
        <div
            class="position-fixed bottom-0 start-0 bg-white rounded-4 shadow-lg p-4 m-4"
            style="z-index: 2000; width: 320px"
        >
            <!-- Top section: Image + Details -->
            <div class="d-flex align-items-center mb-4">
                <!-- Left: Profile Picture -->
                <img
                    src="assets/profile_cropped.png"
                    alt="Profile"
                    style="
                        width: 70px;
                        height: 70px;
                        object-fit: cover;
                        border-radius: 10px;
                    "
                />

                <!-- Right: Name & Job -->
                <div class="ms-3">
                    <p class="mb-1 fw-bold" style="font-size: 1.1rem">
                        Name: {{userName}}
                    </p>
                    <p class="mb-0 text-muted">Job: {{userJob}}</p>
                </div>
            </div>

            <!-- Bottom Buttons -->
            <div
                class="d-flex justify-content-between"
                ng-controller="buttons-row"
            >
                <!-- Refresh -->

                <button
                    class="btn border border-white"
                    ng-click="thisSelect('refresh-btn')"
                    ng-class="{'clicked': thisClicked=='refresh-btn'}"
                >
                    <i class="fas fa-rotate-right"></i>
                </button>

                <!-- Report Error -->
                <button
                    class="btn border border-white"
                    ng-click="thisSelect('report-bug-btn')"
                    ng-class="{'clicked': thisClicked=='report-bug-btn'}"
                >
                    <i class="fas fa-bug"></i>
                </button>

                <!-- Logout -->
                <button
                    class="btn border border-white"
                    ng-click="thisSelect('logout-btn')"
                    ng-class="{'clicked': thisClicked=='logout-btn'}"
                >
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
        <script>
            let buttons = angular.module("buttons", []);
            buttons.controller("buttons-row", ($scope, $timeout) => {
                $scope.thisClicked = null;
                $scope.thisSelect = (btn_name) => {
                    $scope.thisClicked = btn_name;
                    $timeout(() => {
                        $scope.thisClicked = null;
                    }, 200); // 500 is the avg time one must view the chang
                };
            });
        </script>
    </body>
    <style>
        .btn.clicked {
            background-color: #825995 !important;
            color: white !important;
            transition:
                background-color 0.2s ease,
                color 0.2s ease;
        }
    </style>
</html>
